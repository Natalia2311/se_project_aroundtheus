!function(){"use strict";var e=class{constructor(e,t,s,r,i){this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleImageClick=s,this.isLiked=e.isLiked,this._id=e._id,this._handleDeleteButton=r,this._handleCardLike=i}setLikeStatus(e){this.isLiked=e,this._renderLikes()}_renderLikes(){this.isLiked?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active")}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleCardLike(this)})),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeleteButton(this)})),this._cardImageEl.addEventListener("click",(()=>{this._handleImageClick(this._link,this._name,this._id)}))}handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}_getElement(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._cardElement=this._getElement(),this._cardImageEl=this._cardElement.querySelector(".card__image"),this._cardTitleEl=this._cardElement.querySelector(".card__title"),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._cardImageEl.src=this._link,this._cardImageEl.alt=this._name,this._cardTitleEl.textContent=this._name,this._renderLikes(),this._setEventListeners(),this._cardElement}},t=class{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._containerSelector=document.querySelector(t)}renderItems(){this._items.forEach(this._renderer)}addItem(e){this._containerSelector.prepend(e)}},s=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,this._submitButton=this._form.querySelector(this._submitButtonSelector)}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_hasInvalidInput(e){return!this._inputEls.every((e=>e.validity.valid))}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_setEventListeners(){this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this.toggleButtonState(),this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}toggleButtonState(){this._hasInvalidInput(this._inputEls)?this._disableButton():this._enableButton()}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._inputEls.forEach((e=>{this._hideInputError(e)})),this.toggleButtonState()}};const r={inputSelector:".modal__form-input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__form-input_type_error",errorClass:"modal__error_visible"},i=(document.querySelector("#add-card-modal"),document.querySelector(".cards__list"),document.querySelector("#profile-title-input")),n=document.querySelector("#profile-description-input"),o=(document.forms["profile-form"],document.querySelector("#profile__edit-button")),a=document.querySelector(".profile__add-button"),l=document.querySelector("#preview-card-modal").querySelector("#modal__container-preview"),c=l.querySelector(".modal__preview-image"),d=l.querySelector(".modal__preview-heading");document.querySelector("#profile-name-input"),document.querySelector("#profile-url-input"),document.querySelector(".profile__title"),document.querySelector(".profile__description"),document.querySelector("#profile-edit-modal"),document.querySelector("#delete-modal"),document.querySelector("#profile-avatar-modal");class h{constructor(e){this._popupElement=document.querySelector(e)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscape)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscape)}_handleEscape=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("click",(e=>{(e.target===this._popupElement||e.target.classList.contains("modal__close"))&&this.close()}))}}var u=class extends h{constructor(e,t){super(e),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._inputList=this._popupForm.querySelectorAll(".modal__form-input"),this._submitButton=this._popupForm.querySelector(".modal__button"),this._submitButtonText=this._submitButton.textContent}close(){this._popupForm.reset(),super.close()}setLoading(e){this._submitButton.textContent=e?"Saving ...":this._submitButtonText}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}};const _=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_checkResponce(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{method:"GET",headers:this._headers}).then((e=>this._checkResponce(e)))}getNewCard(e){let{title:t,url:s}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then((e=>this._checkResponce(e)))}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{method:"GET",headers:this._headers}).then((e=>this._checkResponce(e)))}updateUserInfo(e){let{title:t,description:s}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).then((e=>this._checkResponce(e)))}updateAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((e=>this._checkResponce(e)))}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then((e=>this._checkResponce(e)))}updateLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then((e=>this._checkResponce(e)))}removeLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then((e=>this._checkResponce(e)))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"260f3e4b-e160-43cd-8335-e153b3805f81","Content-Type":"application/json"}});let m;function p(e){return e.isLiked?_.removeLike(e._id).then((()=>{e.setLikeStatus(!1)})).catch((e=>{console.error(e)})):_.updateLike(e._id).then((()=>{e.setLikeStatus(!0)})).catch((e=>{console.error(e)}))}_.getInitialCards().then((e=>{m=new t({items:e,renderer:e=>{const t=k(e);m.addItem(t)}},".cards__list"),m.renderItems()})).catch((e=>{console.log(e)})),_.getUserInfo().then((e=>{console.log(e),L.setUserInfo({name:e.name,about:e.about}),L.setUserAvatar(e.avatar)})).catch((e=>{console.error(e)}));const v=new u("#add-card-modal",(function(e){v.setLoading(!0,"Saving ..."),_.getNewCard(e).then((e=>{const t=k(e);m.addItem(t),v.close()})).catch((e=>{console.log(e)})).finally((()=>{v.setLoading(!1)}))}));v.setEventListeners();const E=new s(r,document.forms["card-form"]);E.enableValidation();const f=new u("#avatar-modal",(function(e){f.setLoading(!0,"Saving ..."),_.updateAvatar(e.url).then((t=>{L.setUserAvatar(e.url),f.close()})).catch((e=>{console.log(e)})).finally((()=>{f.setLoading(!1)}))}));f.setEventListeners();const S=new u("#profile-edit-modal",(function(e){let{title:t,description:s}=e;S.setLoading(!0,"Saving ..."),_.updateUserInfo({title:t,description:s}).then((e=>{L.setUserInfo(e),this.close()})).catch((e=>{console.log(e)})).finally((()=>{S.setLoading(!1)})),S.close()}));S.setEventListeners();const b=new s(r,document.forms["profile-form"]);b.enableValidation();const L=new class{constructor(e,t,s){this._profileTitle=document.querySelector(e),this._profileDescription=document.querySelector(t),this._avatar=document.querySelector(s)}getUserInfo(){return{title:this._profileTitle.textContent,description:this._profileDescription.textContent,avatar:this._avatar}}setUserInfo(e){let{name:t,about:s}=e;this._profileTitle.textContent=t,this._profileDescription.textContent=s}setUserAvatar(e){this._avatar.src=e}}(".profile__title",".profile__description",".profile__image"),g=new class extends h{constructor(e){super(e),this._previewImageEl=document.querySelector(".modal__preview-image"),this._previewHeadingEl=document.querySelector(".modal__preview-heading")}open(e,t){console.log(2),this._previewImageEl.src=e,this._previewImageEl.alt=t,this._previewHeadingEl.textContent=t,super.open()}}("#preview-card-modal");function y(e,t){c.src=e,c.alt=t,d.textContent=t,g.open(e,t)}function k(t){return new e(t,"#card-template",y,C,p).getView()}g.setEventListeners();const q=new class extends h{constructor(e){super(e),this._popupForm=this._popupElement.querySelector(".modal__form"),this._submitButton=this._popupForm.querySelector(".modal__button")}setSubmitAction(e){this._handleFormSubmit=e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(),this.close()}))}}("#delete-modal");function C(e){q.open(),q.setSubmitAction((()=>{_.deleteCard(e._id).then((()=>{q.close(),e.handleDeleteCard()})).catch((e=>{console.log(e)}))}))}q.setEventListeners(),document.querySelector(".profile__icon").addEventListener("click",(()=>{f.open()})),o.addEventListener("click",(()=>{b.resetValidation();const e=L.getUserInfo();i.value=e.title,n.value=e.description,S.open()})),a.addEventListener("click",(()=>{v.open(),E.resetValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUN6Q29KLEVBQVl6RSxNQUFNLElBb0JwQlQsRUFBa0JsRSxpQkFBaUIsU0FBUyxLQUMxQ3NKLEVBQWtCeEYsa0JBQ2xCLE1BQU1zRyxFQUFXeEIsRUFBZ0JwQixjQUNqQ3hELEVBQWtCZ0MsTUFBUW9FLEVBQVNqRCxNQUNuQ2xELEVBQXdCK0IsTUFBUW9FLEVBQVN6QyxZQUN6QzBCLEVBQWMxRSxNQUFNLElBR3RCUCxFQUFpQnBFLGlCQUFpQixTQUFTLEtBQ3pDK0ksRUFBYXBFLE9BQ2J1RSxFQUFpQnBGLGlCQUFpQixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9hcGkuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBEZWxldGVDb25maXJtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgY2FyZERhdGEsXHJcbiAgICBjYXJkU2VsZWN0b3IsXHJcbiAgICBoYW5kbGVJbWFnZUNsaWNrLFxyXG4gICAgaGFuZGxlRGVsZXRlQnV0dG9uLFxyXG4gICAgaGFuZGxlQ2FyZExpa2VcclxuICApIHtcclxuICAgIHRoaXMuX25hbWUgPSBjYXJkRGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGNhcmREYXRhLmxpbms7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICAgIHRoaXMuaXNMaWtlZCA9IGNhcmREYXRhLmlzTGlrZWQ7XHJcbiAgICB0aGlzLl9pZCA9IGNhcmREYXRhLl9pZDtcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbiA9IGhhbmRsZURlbGV0ZUJ1dHRvbjtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRMaWtlID0gaGFuZGxlQ2FyZExpa2U7XHJcbiAgfVxyXG5cclxuICBzZXRMaWtlU3RhdHVzKGlzTGlrZWQpIHtcclxuICAgIHRoaXMuaXNMaWtlZCA9IGlzTGlrZWQ7XHJcbiAgICB0aGlzLl9yZW5kZXJMaWtlcygpO1xyXG4gIH1cclxuXHJcbiAgX3JlbmRlckxpa2VzKCkge1xyXG4gICAgaWYgKHRoaXMuaXNMaWtlZCkge1xyXG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRMaWtlKHRoaXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVCdXR0b24odGhpcyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcy5fbGluaywgdGhpcy5fbmFtZSwgdGhpcy5faWQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVEZWxldGVDYXJkKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBfZ2V0RWxlbWVudCgpIHtcclxuICAgIHJldHVybiBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmlldygpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0RWxlbWVudCgpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWwgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlRWwgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5jYXJkX19kZWxldGUtYnV0dG9uXCJcclxuICAgICk7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWwuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX3JlbmRlckxpa2VzKCk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IENhcmQ7XHJcbiIsImNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lclNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2godGhpcy5fcmVuZGVyZXIpO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShjYXJkKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXJTZWxlY3Rvci5wcmVwZW5kKGNhcmQpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgU2VjdGlvbjtcclxuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWw7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dChpbnB1dEVscykge1xyXG4gICAgcmV0dXJuICF0aGlzLl9pbnB1dEVscy5ldmVyeSgoaW5wdXRFbCkgPT4gaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XHJcbiAgfVxyXG5cclxuICBfZW5hYmxlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIF9kaXNhYmxlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbHMgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcclxuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcclxuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGUpID0+IHtcclxuICAgICAgICAvLyB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkodGhpcy5fZm9ybSwgaW5wdXRFbCk7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgIC8vdGhpcy50b2dnbGVCdXR0b25TdGF0ZSh0aGlzLl9zdWJtaXRCdXR0b24pO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dEVscykpIHtcclxuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fZW5hYmxlQnV0dG9uKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBfY2hlY2tJbnB1dFZhbGlkaXR5KGZvcm1FbCwgaW5wdXRFbCkge1xyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xyXG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfSBlbHNlIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IHNldHRpbmdzID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9fZm9ybS1pbnB1dF90eXBlX2Vycm9yXCIsXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xyXG4iLCJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIFxyXG5dO1xyXG5cclxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25TZXR0aW5ncyA9IHtcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybS1pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19mb3JtLWlucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgYWRkQ2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1tb2RhbFwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRMaXN0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZVRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGUtaW5wdXRcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcInByb2ZpbGUtZm9ybVwiXTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIiNwcm9maWxlX19lZGl0LWJ1dHRvblwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBhZGROZXdDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgcHJldmlld0NhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1jYXJkLW1vZGFsXCIpO1xyXG5leHBvcnQgY29uc3QgcHJldmlld01vZGFsQ29udGFpbmVyID0gcHJldmlld0NhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiI21vZGFsX19jb250YWluZXItcHJldmlld1wiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBwcmV2aWV3SW1hZ2VFbCA9IHByZXZpZXdNb2RhbENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLm1vZGFsX19wcmV2aWV3LWltYWdlXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IHByZXZpZXdIZWFkaW5nRWwgPSBwcmV2aWV3TW9kYWxDb250YWluZXIucXVlcnlTZWxlY3RvcihcclxuICBcIi5tb2RhbF9fcHJldmlldy1oZWFkaW5nXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLW5hbWUtaW5wdXRcIik7XHJcbmV4cG9ydCBjb25zdCBjYXJkVXJsSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdXJsLWlucHV0XCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGRlbGV0ZUNhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVsZXRlLW1vZGFsXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGVkaXRQcm9maWxlQXZhdGFyTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYXZhdGFyLW1vZGFsXCIpO1xyXG5cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY2FwZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjYXBlKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NhcGUgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIGV2dC50YXJnZXQgPT09IHRoaXMuX3BvcHVwRWxlbWVudCB8fFxyXG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2Nsb3NlXCIpXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9fZm9ybS1pbnB1dFwiKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25UZXh0ID0gdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xyXG4gIH1cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICB9XHJcblxyXG4gIHNldExvYWRpbmcoaXNMb2FkaW5nKSB7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2aW5nIC4uLlwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fc3VibWl0QnV0dG9uVGV4dDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xyXG4gIH1cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9KTtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtO1xyXG4iLCIvLyBJbXBvcnQgYWxsIHRoZSBjbGFzc2VzXHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IHtcclxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXHJcbiAgYWRkQ2FyZE1vZGFsLFxyXG4gIHByb2ZpbGVFZGl0TW9kYWwsXHJcbiAgY2FyZExpc3RFbCxcclxuICBwcm9maWxlVGl0bGVJbnB1dCxcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCxcclxuICBwcm9maWxlRWRpdEZvcm0sXHJcbiAgcHJvZmlsZUVkaXRCdXR0b24sXHJcbiAgYWRkTmV3Q2FyZEJ1dHRvbixcclxuICBwcmV2aWV3SW1hZ2VFbCxcclxuICBwcmV2aWV3SGVhZGluZ0VsLFxyXG4gIGNhcmRUaXRsZUlucHV0LFxyXG4gIGNhcmRVcmxJbnB1dCxcclxuICBwcmV2aWV3Q2FyZE1vZGFsLFxyXG4gIHByZXZpZXdNb2RhbENvbnRhaW5lcixcclxuICBwcm9maWxlVGl0bGUsXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uLFxyXG4gIGluaXRpYWxDYXJkcyxcclxuICBkZWxldGVDYXJkTW9kYWwsXHJcbiAgZWRpdFByb2ZpbGVBdmF0YXJNb2RhbCxcclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXAuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL2FwaS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBEZWxldGVDb25maXJtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwRGVsZXRlQ29uZmlybS5qc1wiO1xyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiMjYwZjNlNGItZTE2MC00M2NkLTgzMzUtZTE1M2IzODA1ZjgxXCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuXHJcbmxldCBjYXJkU2VjdGlvbjtcclxuXHJcbmFwaVxyXG4gIC5nZXRJbml0aWFsQ2FyZHMoKVxyXG4gIC50aGVuKChyZXMpID0+IHtcclxuICAgIGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAgICAgIHtcclxuICAgICAgICBpdGVtczogcmVzLFxyXG4gICAgICAgIHJlbmRlcmVyOiAoY2FyZERhdGEpID0+IHtcclxuICAgICAgICAgIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKGNhcmREYXRhKTtcclxuICAgICAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgICAgXCIuY2FyZHNfX2xpc3RcIlxyXG4gICAgKTtcclxuICAgIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coZXJyKTtcclxuICB9KTtcclxuXHJcbmFwaVxyXG4gIC5nZXRVc2VySW5mbygpXHJcbiAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgcHJvZmlsZVVzZXJJbmZvLnNldFVzZXJJbmZvKHtcclxuICAgICAgbmFtZTogZGF0YS5uYW1lLFxyXG4gICAgICBhYm91dDogZGF0YS5hYm91dCxcclxuICAgIH0pO1xyXG4gICAgcHJvZmlsZVVzZXJJbmZvLnNldFVzZXJBdmF0YXIoZGF0YS5hdmF0YXIpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICB9KTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmRMaWtlKGNhcmQpIHtcclxuICBpZiAoIWNhcmQuaXNMaWtlZCkge1xyXG4gICAgcmV0dXJuIGFwaVxyXG4gICAgICAudXBkYXRlTGlrZShjYXJkLl9pZClcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGNhcmQuc2V0TGlrZVN0YXR1cyh0cnVlKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gYXBpXHJcbiAgICAgIC5yZW1vdmVMaWtlKGNhcmQuX2lkKVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgY2FyZC5zZXRMaWtlU3RhdHVzKGZhbHNlKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIjYWRkLWNhcmQtbW9kYWxcIixcclxuICBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdFxyXG4pO1xyXG5cclxuYWRkQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmNvbnN0IGFkZEZvcm1FbGVtZW50ID0gZG9jdW1lbnQuZm9ybXNbXCJjYXJkLWZvcm1cIl07XHJcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uU2V0dGluZ3MsIGFkZEZvcm1FbGVtZW50KTtcclxuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBhdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI2F2YXRhci1tb2RhbFwiLCBoYW5kbGVBdmF0YXJGb3JtU3VibWl0KTtcclxuYXZhdGFyUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGVkaXRGb3JtUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcclxuICBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdFxyXG4pO1xyXG5cclxuZWRpdEZvcm1Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5jb25zdCBwcm9maWxlRWRpdEVsZW1lbnQgPSBkb2N1bWVudC5mb3Jtc1tcInByb2ZpbGUtZm9ybVwiXTtcclxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXHJcbiAgcHJvZmlsZUVkaXRFbGVtZW50XHJcbik7XHJcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVVc2VySW5mbyA9IG5ldyBVc2VySW5mbyhcclxuICBcIi5wcm9maWxlX190aXRsZVwiLFxyXG4gIFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXHJcbiAgXCIucHJvZmlsZV9faW1hZ2VcIlxyXG4pO1xyXG5cclxuY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjcHJldmlldy1jYXJkLW1vZGFsXCIpO1xyXG5wb3B1cFdpdGhJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8gQWxsIHRoZSByZXN0XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKGxpbmssIG5hbWUpIHtcclxuICBwcmV2aWV3SW1hZ2VFbC5zcmMgPSBsaW5rO1xyXG4gIHByZXZpZXdJbWFnZUVsLmFsdCA9IG5hbWU7XHJcbiAgcHJldmlld0hlYWRpbmdFbC50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgcG9wdXBXaXRoSW1hZ2Uub3BlbihsaW5rLCBuYW1lKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChjYXJkRGF0YSkge1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoXHJcbiAgICBjYXJkRGF0YSxcclxuICAgIFwiI2NhcmQtdGVtcGxhdGVcIixcclxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICBoYW5kbGVEZWxldGVCdXR0b24sXHJcbiAgICBoYW5kbGVDYXJkTGlrZVxyXG4gICk7XHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50LmdldFZpZXcoKTtcclxufVxyXG5cclxuY29uc3QgY2FyZERlbGV0ZU1vZGFsID0gbmV3IFBvcHVwRGVsZXRlQ29uZmlybShcIiNkZWxldGUtbW9kYWxcIik7XHJcbmNhcmREZWxldGVNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlQnV0dG9uKGNhcmQpIHtcclxuICBjYXJkRGVsZXRlTW9kYWwub3BlbigpO1xyXG4gIGNhcmREZWxldGVNb2RhbC5zZXRTdWJtaXRBY3Rpb24oKCkgPT4ge1xyXG4gICAgYXBpXHJcbiAgICAgIC5kZWxldGVDYXJkKGNhcmQuX2lkKVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgY2FyZERlbGV0ZU1vZGFsLmNsb3NlKCk7XHJcbiAgICAgICAgY2FyZC5oYW5kbGVEZWxldGVDYXJkKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgfSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0KHsgdGl0bGUsIGRlc2NyaXB0aW9uIH0pIHtcclxuICBlZGl0Rm9ybVBvcHVwLnNldExvYWRpbmcodHJ1ZSwgXCJTYXZpbmcgLi4uXCIpO1xyXG4gIGFwaVxyXG4gICAgLnVwZGF0ZVVzZXJJbmZvKHsgdGl0bGUsIGRlc2NyaXB0aW9uIH0pXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHByb2ZpbGVVc2VySW5mby5zZXRVc2VySW5mbyhyZXMpO1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIGVkaXRGb3JtUG9wdXAuc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICB9KTtcclxuICBlZGl0Rm9ybVBvcHVwLmNsb3NlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUF2YXRhckZvcm1TdWJtaXQoaW5wdXRWYWx1ZXMpIHtcclxuICBhdmF0YXJQb3B1cC5zZXRMb2FkaW5nKHRydWUsIFwiU2F2aW5nIC4uLlwiKTtcclxuICBhcGlcclxuICAgIC51cGRhdGVBdmF0YXIoaW5wdXRWYWx1ZXMudXJsKVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBwcm9maWxlVXNlckluZm8uc2V0VXNlckF2YXRhcihpbnB1dFZhbHVlcy51cmwpO1xyXG4gICAgICBhdmF0YXJQb3B1cC5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBhdmF0YXJQb3B1cC5zZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5jb25zdCBvcGVuQXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pY29uXCIpO1xyXG5cclxub3BlbkF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGF2YXRhclBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdChpbnB1dFZhbHVlcykge1xyXG4gIGFkZENhcmRQb3B1cC5zZXRMb2FkaW5nKHRydWUsIFwiU2F2aW5nIC4uLlwiKTtcclxuICBhcGlcclxuICAgIC5nZXROZXdDYXJkKGlucHV0VmFsdWVzKVxyXG4gICAgLnRoZW4oKGNhcmREYXRhKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKGNhcmREYXRhKTtcclxuICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkKTtcclxuICAgICAgYWRkQ2FyZFBvcHVwLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIGFkZENhcmRQb3B1cC5zZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGVkaXRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGNvbnN0IHVzZXJJbmZvID0gcHJvZmlsZVVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSB1c2VySW5mby50aXRsZTtcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHVzZXJJbmZvLmRlc2NyaXB0aW9uO1xyXG4gIGVkaXRGb3JtUG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbmFkZE5ld0NhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGRDYXJkUG9wdXAub3BlbigpO1xyXG4gIGFkZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG4iLCJjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrUmVzcG9uY2UocmVzKSB7XHJcbiAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2NoZWNrUmVzcG9uY2UocmVzKSk7XHJcbiAgfVxyXG5cclxuICBnZXROZXdDYXJkKHsgdGl0bGUsIHVybCB9KSB7XHJcbiAgICAvLyBuYW1lIG1pZ2h0IGJlIGRpZmZlcmVudFxyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogdGl0bGUsXHJcbiAgICAgICAgbGluazogdXJsLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25jZShyZXMpKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2NoZWNrUmVzcG9uY2UocmVzKSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVVc2VySW5mbyh7IHRpdGxlLCBkZXNjcmlwdGlvbiB9KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogdGl0bGUsXHJcbiAgICAgICAgYWJvdXQ6IGRlc2NyaXB0aW9uLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25jZShyZXMpKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZUF2YXRhcih1cmwpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgYXZhdGFyOiB1cmwsXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbmNlKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZChpZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2NoZWNrUmVzcG9uY2UocmVzKSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVMaWtlKGlkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtpZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25jZShyZXMpKTtcclxuICB9XHJcblxyXG4gIHJlbW92ZUxpa2UoaWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2lkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbmNlKHJlcykpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQXBpO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcm9maWxlVGl0bGVTZWxlY3RvcixcclxuICAgIHByb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yLFxyXG4gICAgYXZhdGFyU2VsZWN0b3JcclxuICApIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZVRpdGxlU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgcHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICB0aGlzLl9hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcclxuICB9XHJcbiAgLy8gcmV0dXJuIG9iamVjdCBjb250YWluaW5nIHRoZSB0ZXh0IGNvbnRlbnQgb2YgdGhlIHByb2ZpbGUgZWxlbWVudHNcclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHRpdGxlOiB0aGlzLl9wcm9maWxlVGl0bGUudGV4dENvbnRlbnQsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQsXHJcbiAgICAgIGF2YXRhcjogdGhpcy5fYXZhdGFyLFxyXG4gICAgfTtcclxuICB9XHJcbiAgLy9wYXNzIGluIHRoZSB2YWx1ZXMgZnJvbSB0aGUgZm9ybSBzdWJtaXNzaW9uXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XHJcbiAgICB0aGlzLl9wcm9maWxlVGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gYWJvdXQ7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VyQXZhdGFyKGF2YXRhcikge1xyXG4gICAgdGhpcy5fYXZhdGFyLnNyYyA9IGF2YXRhcjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fcHJldmlldy1pbWFnZVwiKTtcclxuICAgIHRoaXMuX3ByZXZpZXdIZWFkaW5nRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19wcmV2aWV3LWhlYWRpbmdcIik7XHJcbiAgfVxyXG5cclxuICBvcGVuKGxpbmssIG5hbWUpIHtcclxuICAgIGNvbnNvbGUubG9nKDIpXHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2VFbC5zcmMgPSBsaW5rO1xyXG4gICAgdGhpcy5fcHJldmlld0ltYWdlRWwuYWx0ID0gbmFtZTtcclxuICAgIHRoaXMuX3ByZXZpZXdIZWFkaW5nRWwudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG5cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cERlbGV0ZUNvbmZpcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XHJcbiAgfVxyXG5cclxuICBzZXRTdWJtaXRBY3Rpb24oYWN0aW9uKSB7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gYWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCgpO1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwiY2FyZERhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiaGFuZGxlRGVsZXRlQnV0dG9uIiwiaGFuZGxlQ2FyZExpa2UiLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiaXNMaWtlZCIsIl9pZCIsIl9oYW5kbGVEZWxldGVCdXR0b24iLCJfaGFuZGxlQ2FyZExpa2UiLCJzZXRMaWtlU3RhdHVzIiwiX3JlbmRlckxpa2VzIiwiX2xpa2VCdXR0b24iLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiX2NhcmRFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsIl9jYXJkSW1hZ2VFbCIsImhhbmRsZURlbGV0ZUNhcmQiLCJfZ2V0RWxlbWVudCIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsImdldFZpZXciLCJfY2FyZFRpdGxlRWwiLCJfZGVsZXRlQnV0dG9uIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJfcmVmIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVySXRlbXMiLCJmb3JFYWNoIiwiYWRkSXRlbSIsImNhcmQiLCJwcmVwZW5kIiwic2V0dGluZ3MiLCJmb3JtRWwiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybSIsIl9zdWJtaXRCdXR0b24iLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsIiwiZXJyb3JNZXNzYWdlRWwiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2hhc0ludmFsaWRJbnB1dCIsImlucHV0RWxzIiwiX2lucHV0RWxzIiwiZXZlcnkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2VuYWJsZUJ1dHRvbiIsImRpc2FibGVkIiwiX2Rpc2FibGVCdXR0b24iLCJxdWVyeVNlbGVjdG9yQWxsIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0VmFsaWRhdGlvbiIsInZhbGlkYXRpb25TZXR0aW5ncyIsInByb2ZpbGVUaXRsZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJwcm9maWxlRWRpdEJ1dHRvbiIsImZvcm1zIiwiYWRkTmV3Q2FyZEJ1dHRvbiIsInByZXZpZXdNb2RhbENvbnRhaW5lciIsInByZXZpZXdJbWFnZUVsIiwicHJldmlld0hlYWRpbmdFbCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJvcGVuIiwiX2hhbmRsZUVzY2FwZSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfaW5wdXRMaXN0IiwiX3N1Ym1pdEJ1dHRvblRleHQiLCJyZXNldCIsInNldExvYWRpbmciLCJpc0xvYWRpbmciLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dFZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJhcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJfY2hlY2tSZXNwb25jZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJnZXRJbml0aWFsQ2FyZHMiLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJnZXROZXdDYXJkIiwiX3JlZjIiLCJ0aXRsZSIsInVybCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZ2V0VXNlckluZm8iLCJ1cGRhdGVVc2VySW5mbyIsIl9yZWYzIiwiZGVzY3JpcHRpb24iLCJhYm91dCIsInVwZGF0ZUF2YXRhciIsImF2YXRhciIsImRlbGV0ZUNhcmQiLCJ1cGRhdGVMaWtlIiwicmVtb3ZlTGlrZSIsImF1dGhvcml6YXRpb24iLCJjYXJkU2VjdGlvbiIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiU2VjdGlvbiIsImNyZWF0ZUNhcmQiLCJsb2ciLCJkYXRhIiwicHJvZmlsZVVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJzZXRVc2VyQXZhdGFyIiwiYWRkQ2FyZFBvcHVwIiwiUG9wdXBXaXRoRm9ybSIsImZpbmFsbHkiLCJhZGRGb3JtVmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciIsImF2YXRhclBvcHVwIiwiZWRpdEZvcm1Qb3B1cCIsImVkaXRGb3JtVmFsaWRhdG9yIiwicHJvZmlsZVRpdGxlU2VsZWN0b3IiLCJwcm9maWxlRGVzY3JpcHRpb25TZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwiX3Byb2ZpbGVUaXRsZSIsIl9wcm9maWxlRGVzY3JpcHRpb24iLCJfYXZhdGFyIiwicG9wdXBXaXRoSW1hZ2UiLCJfcHJldmlld0ltYWdlRWwiLCJfcHJldmlld0hlYWRpbmdFbCIsIkNhcmQiLCJjYXJkRGVsZXRlTW9kYWwiLCJzZXRTdWJtaXRBY3Rpb24iLCJhY3Rpb24iLCJ1c2VySW5mbyJdLCJzb3VyY2VSb290IjoiIn0=